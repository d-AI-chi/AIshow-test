# 外部公開手順（Vercel使用）

このサービスを外部公開して、PC・携帯からアクセスできるようにする手順です。

## 方法1: Vercelを使用（推奨・無料）

### ステップ1: Vercelアカウントを作成
1. https://vercel.com にアクセス
2. 「Sign Up」をクリック
3. GitHubアカウントでログイン（推奨）またはメールアドレスで登録

### ステップ2: プロジェクトをGitHubにプッシュ（推奨）
1. GitHubで新しいリポジトリを作成
2. 以下のコマンドを実行：

```bash
cd AIshow-test
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/あなたのユーザー名/リポジトリ名.git
git push -u origin main
```

### ステップ3: Vercelにデプロイ
1. https://vercel.com/dashboard にアクセス
2. 「Add New...」→「Project」をクリック
3. GitHubリポジトリを選択（または「Import Git Repository」で接続）
4. プロジェクト設定：
   - **Framework Preset**: Vite
   - **Root Directory**: `./`（そのまま）
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
5. 「Environment Variables」セクションで以下を追加：
   - `VITE_SUPABASE_URL`: `https://olzjxrwakkhcyqeguotn.supabase.co`
   - `VITE_SUPABASE_ANON_KEY`: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9semp4cndha2toY3lxZWd1b3RuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NDM3MTgsImV4cCI6MjA3ODUxOTcxOH0.kCvW_8fvxtOWobrt9GGSZc9y3HYBk3P16837itsTxv0`
6. 「Deploy」をクリック

### ステップ4: デプロイ完了
- 数分でデプロイが完了します
- `https://あなたのプロジェクト名.vercel.app` というURLが発行されます
- このURLをPC・携帯からアクセスできます

### ステップ5: 自動デプロイの確認
VercelでGitHubリポジトリを接続すると、**自動的に自動デプロイが有効**になります。

#### 自動デプロイの動作
- `main` ブランチにプッシュすると、自動的に本番環境にデプロイされます
- 他のブランチにプッシュすると、プレビュー環境としてデプロイされます

#### 確認方法（詳しい手順）

1. **Vercelダッシュボードにアクセス**
   - https://vercel.com/dashboard にアクセス
   - プロジェクト一覧から該当のプロジェクトをクリック

2. **Settings（設定）を開く**
   - プロジェクトページの上部メニューで「Settings」タブをクリック
   - 左側のメニューから「Git」をクリック

3. **Production Branchを確認**
   - 「Git」ページの「Production Branch」セクションを確認
   - 「Production Branch」のドロップダウンまたは表示で `main` になっているか確認
   - もし `master` になっている場合は、ドロップダウンから `main` に変更できます

**注意**: 「Deploy Hooks」は別の機能です。自動デプロイの設定は「Git」タブで確認してください。

#### 手動で再デプロイする場合
1. Vercelダッシュボードでプロジェクトを開く
2. 「Deployments」タブを開く
3. 最新のデプロイの「...」メニューから「Redeploy」を選択

#### コードを更新してデプロイする場合
```bash
# コードを変更後
git add .
git commit -m "更新内容"
git push origin main
```
→ 自動的にVercelでデプロイが開始されます

---

## 方法2: Netlifyを使用（無料）

### ステップ1: Netlifyアカウントを作成
1. https://www.netlify.com にアクセス
2. 「Sign up」をクリックしてアカウント作成

### ステップ2: デプロイ
1. Netlifyダッシュボードで「Add new site」→「Import an existing project」
2. GitHubリポジトリを選択
3. ビルド設定：
   - **Build command**: `npm run build`
   - **Publish directory**: `dist`
4. 「Environment variables」で以下を追加：
   - `VITE_SUPABASE_URL`: `https://olzjxrwakkhcyqeguotn.supabase.co`
   - `VITE_SUPABASE_ANON_KEY`: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9semp4cndha2toY3lxZWd1b3RuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NDM3MTgsImV4cCI6MjA3ODUxOTcxOH0.kCvW_8fvxtOWobrt9GGSZc9y3HYBk3P16837itsTxv0`
5. 「Deploy site」をクリック

---

## 方法3: Cloudflare Pagesを使用（無料・高速）

### ステップ1: Cloudflareアカウント作成
1. https://pages.cloudflare.com にアクセス
2. アカウント作成

### ステップ2: デプロイ
1. 「Create a project」→「Connect to Git」
2. GitHubリポジトリを選択
3. ビルド設定：
   - **Framework preset**: Vite
   - **Build command**: `npm run build`
   - **Build output directory**: `dist`
4. 「Environment variables」で以下を追加：
   - `VITE_SUPABASE_URL`: `https://olzjxrwakkhcyqeguotn.supabase.co`
   - `VITE_SUPABASE_ANON_KEY`: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9semp4cndha2toY3lxZWd1b3RuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NDM3MTgsImV4cCI6MjA3ODUxOTcxOH0.kCvW_8fvxtOWobrt9GGSZc9y3HYBk3P16837itsTxv0`
5. 「Save and Deploy」をクリック

---

## カスタムドメインの設定（オプション）

どのサービスでも、独自ドメインを設定できます：
1. ドメインを購入（例: Namecheap, Google Domains）
2. ホスティングサービスの設定でドメインを追加
3. DNS設定を変更

---

## 注意事項

1. **SupabaseのRLSポリシー**: 現在のRLSポリシーは外部からのアクセスを許可しているため、そのまま使用できます
2. **環境変数**: 本番環境では環境変数を使用することを推奨します（現在はハードコードされていますが動作します）
3. **HTTPS**: すべてのホスティングサービスで自動的にHTTPSが有効になります
4. **自動デプロイ**: GitHubにプッシュすると自動的にデプロイされます

---

## トラブルシューティング

### ビルドエラーが発生する場合
```bash
# ローカルでビルドをテスト
npm run build
```

### 環境変数が反映されない場合
- デプロイ後に環境変数を追加した場合は、再デプロイが必要です
- Vercelの場合: 「Deployments」タブで「Redeploy」をクリック

### ルーティングが正しく動作しない場合
- `vercel.json`ファイルが正しく配置されているか確認
- Netlifyの場合は`_redirects`ファイルが必要な場合があります

