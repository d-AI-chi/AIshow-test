# 管理者コード機能のマイグレーション実行手順

管理者コードの保存に失敗する場合は、以下のマイグレーションをSupabaseで実行してください。

## 実行手順

1. Supabaseのダッシュボードにログイン
2. 左メニューから「SQL Editor」を選択
3. 以下のマイグレーションファイルの内容をコピー＆ペーストして実行：

   **ファイル**: `supabase/migrations/20251112132000_add_admin_code_to_events.sql`

4. 「Run」ボタンをクリックして実行

## マイグレーション内容

```sql
-- Add admin_code column to events table
DO $$
BEGIN
  IF NOT EXISTS (
    SELECT 1 FROM information_schema.columns
    WHERE table_schema = 'public'
    AND table_name = 'events'
    AND column_name = 'admin_code'
  ) THEN
    ALTER TABLE events
    ADD COLUMN admin_code text;
    
    COMMENT ON COLUMN events.admin_code IS 'Code required to access the admin page for this event.';
  END IF;
END $$;
```

## 確認方法

マイグレーションが正しく実行されたか確認するには、SupabaseのSQL Editorで以下を実行：

```sql
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_name = 'events' 
AND column_name = 'admin_code';
```

`admin_code`カラムが表示されれば成功です。

